{"version":3,"file":"src_app_editprofile_editprofile_module_ts.js","mappings":"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","sources":["./src/app/editprofile/editprofile-routing.module.ts","./src/app/editprofile/editprofile.module.ts","./src/app/editprofile/editprofile.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EditprofilePage } from './editprofile.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditprofilePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EditprofilePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditprofilePageRoutingModule } from './editprofile-routing.module';\n\nimport { EditprofilePage } from './editprofile.page';\nimport {SharedModule} from \"../shared/shared.module\";\n\n@NgModule({\n  imports: [\n    SharedModule,\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EditprofilePageRoutingModule\n  ],\n  declarations: [EditprofilePage]\n})\nexport class EditprofilePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {ApiService} from \"../services/api.service\";\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {NavController} from \"@ionic/angular\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {Storage} from '@ionic/storage-angular';\n@Component({\n  selector: 'app-editprofile',\n  templateUrl: './editprofile.page.html',\n  styleUrls: ['./editprofile.page.scss'],\n})\nexport class EditprofilePage implements OnInit {\n  private params;\n  private loadData = false;\n  public gendershow = false;\n  public birthdayshow = false;\n  public username = '';\n  public first_name = '';\n  public last_name = '';\n  public date_birth = '0';\n  public userid = '';\n  public usergendervalue = '0';\n  public personEmail = '';\n  private changeuser: FormGroup;\n  private validationMessages = {\n    name: [\n      {type: 'required', message: 'Имя обязательно'},\n      {type: 'maxlength', message: 'Слишком длинное'}\n    ],\n    lastname: [\n      {type: 'maxlength', message: 'Слишком длинное'}\n    ],\n    email: [\n      {type: 'required', message: 'E-mail обязателен для отправки данных заказа'},\n      {type: 'pattern', message: 'Некорректный email'}\n    ],\n    // gender: [\n    //   {type: 'required', message: 'Пол обязательно указать'},\n    // ],\n  };\n  constructor(\n    private api: ApiService,\n    // private useradr: UseradrService,\n    private navCtrl: NavController,\n    private storage: Storage,\n    private formBuilder: FormBuilder,\n    private route: ActivatedRoute,\n  ) {\n\n    // this.storage.get('username').then(username => {\n    //   if(username!==''){\n    //     this.username = username;\n    //   } else {\n    //     this.username ='';\n    //   }\n    //   this.changeuser.controls.name.reset(this.username);\n    //   console.log( 'CHECKOUTusername',this.username);\n    // });\n  }\n\n  ngOnInit() {\n    this.changeuser = this.formBuilder.group({\n      name: new FormControl('', [Validators.required, Validators.maxLength(50)]),\n      lastname: new FormControl('', [Validators.maxLength(50)]),\n      email: new FormControl(this.personEmail, Validators.compose([\n        Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')\n      ])),\n    });\n    this.route.queryParams.subscribe(params => {\n      this.params = params;\n      console.log('this.params', this.params);\n      if(this.params.mail){\n        this.changeuser.controls.email.reset(this.params.mail);\n      }\n      // if(this.params.tit){\n      //   this.tit = this.params.tit;\n      // }\n    });\n    this.storage.get('user').then(user => {\n      console.log('USER', user);\n      if(user!==''){\n        this.userid = user.id;\n        this.first_name = user.first_name;\n        this.last_name = user.last_name;\n        this.personEmail = user.email;\n        // this.personBirthday = user.date_birth;\n        // this.personPhone = user.phone;\n        // this.personPhoneShow = ApiService.createPhoneNumber(user.phone);\n        this.usergendervalue = user.gender.value ? user.gender.value : '0';\n        this.date_birth = user.date_birth ? user.date_birth : '0';\n        // this.getCustomerInfo(this.userid);\n        // this.getAdress(this.userid);\n        // this.technologies = this.orders.oldOrders;\n        this.changeuser.controls.name.reset(this.first_name);\n        this.changeuser.controls.lastname.reset(this.last_name);\n        this.changeuser.controls.email.reset(this.personEmail);\n        console.log('usergendervalue',this.usergendervalue);\n        console.log('date_birth',this.date_birth);\n        if(this.usergendervalue=='0'){\n          console.log('gendershow',this.gendershow);\n          this.changeuser.setControl('gender', new FormControl('', Validators.compose([])));\n          this.gendershow = true;\n          console.log('gendershow2',this.gendershow);\n\n        } else {\n          this.gendershow = false;\n          this.changeuser.removeControl('gender');\n        }\n        if(this.date_birth=='0'){\n          console.log('birthdayshow',this.birthdayshow);\n          this.changeuser.setControl('birthday', new FormControl('', Validators.compose([])));\n          this.birthdayshow = true;\n          console.log('birthdayshow2',this.birthdayshow);\n        } else {\n          this.birthdayshow = false;\n          this.changeuser.removeControl('birthday');\n        }\n      } else {\n        this.userid ='';\n      }\n    });\n  }\n  async changeDataUser() {\n    console.log('SUBMIT');\n    // if (!this.loggedIn) {\n    //   return;\n    // }\n    for (let control in this.changeuser.controls) {\n      if (this.changeuser.controls.hasOwnProperty(control)) {\n        this.changeuser.controls[control].markAsTouched();\n      }\n    }\n    if (this.changeuser.status === 'INVALID') {\n      return;\n    }\n    console.log('SUBMIT2');\n    let namedata = '';\n    let emaildata = '';\n    let datauser:any = {};\n    namedata = this.changeuser.value.name ? datauser.first_name = this.changeuser.value.name : '';\n    emaildata = this.changeuser.value.email ? datauser.email = this.changeuser.value.email : '';\n\n    datauser = {\n      id:this.userid,\n        email: this.changeuser.value.email,\n        first_name: this.changeuser.value.name,\n      last_name: this.changeuser.value.lastname\n      };\n    if(this.changeuser.value.gender){\n      datauser['gender']=this.changeuser.value.gender\n    }\n    if(this.changeuser.value.birthday){\n      datauser['date_birth']=this.changeuser.value.birthday\n    }\n    console.log('datauser', datauser);\n\n    this.loadData = true;\n    this.api.updateApi('clients', datauser).then((response)=> {\n      console.log(response);\n      if(response.hasOwnProperty('data') && response['data']){\n        this.api.alertMessage('Данные отправлены.', '');\n            this.storage.set('username', namedata);\n            this.loadData=false;\n            this.navCtrl.navigateRoot('/profile?userid='+this.userid);\n      } else {\n\n            this.api.alertMessage('Искренне сожалеем,', 'произошла ошибка. Попробуйте чуть позже.');\n            this.loadData=false;\n            this.navCtrl.navigateRoot('/');\n          }\n    });\n\n  }\n  public  goBack(){\n    this.navCtrl.back();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}